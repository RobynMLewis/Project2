---
title: "Project 2- Robyn Lewis"
author: "Robyn Lewis"
date: "10/4/2020"
output: 
  rmarkdown::github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(class)
library(tree)
library(caret)
library(tidyverse)
library(dplyr)
library(ggplot2)
library(rmarkdown)
```

# Introduction

describe data and variables, purpose of analysis

For this project, we'll be analyzing the popularity of articles published on [Mashable](mashable.com). Popularity is determined by number of shares, with 1400 or interactions considered popular. Our data is available through the  [UCI Machine Learning Repository](https://archive.ics.uci.edu/ml/datasets/Online+News+Popularity), and consists of 39,644 observations of 61 variables. 

# Data

```{r dataImport}
#read in with relative path
newsData <- read_csv("./Raw Data/OnlineNewsPopularity.csv")

#standardize data

#remember to use TRAIN mean/sd to standardize test data
#use `caret`- can also remove highly correlated vars
```
```{r mondayData}
#suggestion to look at just Monday data first
mondayData <- newsData %>% filter(weekday_is_monday==1)
```

```{r}
#create training data set (70%) and test set (30%)
set.seed(1)
train <- sample(1:nrow(mondayData), size=nrow(mondayData)*0.7)
test <- dplyr::setdiff(1:nrow(mondayData), train)

newsDataTrain <- mondayData[train,]
newsDataTest <- mondayData[test,]

#train <- sample(1:nrow(newsData), size=nrow(newsData)*0.7)
#test <- dplyr::setdiff(1:nrow(newsData), train)

#newsDataTrain <- newsData[train,]
#newsDataTest <- newsData[test,]

```

# Summarizations

basic summary statistics and plots about training data 

```{r}

```

# Modeling

models predicting shares response- describe type of model, fitting process, final chosen model

```{r}
#tree based model, chosen using leave one out cross validation

#use cv.tree, prune.misclass
```

```{r}
#boosted tree model chosen using cross validation
```

# Automation

adapt code to automatically generate a report for each day

```{r dayOfWeek}
#need to consolidate weekday_is_* variables into one column. 
dayOfWeek <- rep(0, nrow(newsData))
dayNames <- c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday")
for (i in newsData[,32:38]){
  if(newsData[,i]==1){dayOfWeek <- dayNames[i]}
}
dayOfWeek
```



```{r automation}
day <- unique(newsData$dayOfWeek)
output_file <- paste0(day, "Analysis.md")
params= lapply(day, FUN=function(x){list(day=x)})
reports <- tibble(output_file, params)

apply(reports, MARGIN=1, FUN=function(x){render(input="/Online News Project.Rmd", output_file=x[[1]], params=x[[2]])})
```

# Packages used
```{r}
#class
#tree
#caret
#tidyverse
#dplyr
#ggplot2
#rmarkdown
```

Data Source Used:

K. Fernandes, P. Vinagre and P. Cortez. A Proactive Intelligent Decision
    Support System for Predicting the Popularity of Online News. Proceedings
    of the 17th EPIA 2015 - Portuguese Conference on Artificial Intelligence,
    September, Coimbra, Portugal.

